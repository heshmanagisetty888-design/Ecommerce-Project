<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
    <script src="script.js" defer></script>
    <script src="list of products.js" defer></script>
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function cartpage(){
            window.location.href="cart.html";
        }
        function signout(){
            localStorage.removeItem("currentUser");
            window.location.href="index.html";
        }
         function addcart(item) {
            alert("Item added to cart! - " + item.name);
            if(localStorage.getItem("cartList")) {
                const cartList = JSON.parse(localStorage.getItem("cartList"));
                cartList.push(item);
                localStorage.setItem("cartList", JSON.stringify(cartList));
            } else {
                localStorage.setItem("cartList", JSON.stringify([item]));
            }
            document.querySelector('.loading-text').innerText = JSON.parse(localStorage.getItem("cartList")).length;
        }

        document.addEventListener('DOMContentLoaded', () => {
            const h5 = document.querySelector('h5');
            const currentUser=JSON.parse(localStorage.getItem("currentUser"));
            if(currentUser){
                h5.innerHTML = 
                `Products to Buy - Welcome ${currentUser.username}
                <button class="btn btn-outline-danger" onclick="signout()">Sign Out</button>
                `;
            } 
        const container = document.querySelector('.pages');
        products.map((item)=>
            {
                const productCard = document.createElement('div');
                productCard.classList.add('card1');
                productCard.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="product-image" width="200" height="200">
                    <h2 class="product-name">${item.name}</h2>
                    <p class="product-price">$${item.price}</p>
                    <button class="btn btn-outline-warning" onclick='addcart(${JSON.stringify(item)})'>Add to Cart</button>
                `;
                container.appendChild(productCard);
            }
    );fetch("https://fakestoreapi.com/products")
    .then(res=>res.json())
    .then((data)=>{
        data.map((item)=>
            {const ci={
                image:item.image,
                name:item.title,
                price:item.price,
                rating:item.rating.rate
            }
                const productCard = document.createElement('div');
                productCard.classList.add('card1');
                productCard.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="product-image" width="200" height="200">
                    <h5 class="product-name">${item.title}</h5>
                    <p class="product-price">$${item.price}</p>
                    <button class="btn btn-outline-warning" onclick='addcart(${JSON.stringify(ci)})'>Add to Cart</button>
                `;
                container.appendChild(productCard);
            })

    })
        });
        </script>
</head>
<body>
    <div class="container">
        <div class="delivery" style="justify-content: center;">
        <span class="loading-text"> 0 </span>
        <svg onclick="cartpage()" xmlns="http://www.w3.org/2000/svg" height="48px" viewBox="0 -960 960 960" width="48px" fill="#FFFF55"><path d="M270-160q-50 0-82-36t-27-85H61l13-60h112q15-18 36.5-28.5T270-380q26 0 47.5 10.5T354-341h198l92-399H186l3-13q5-21 21-34t37-13h472l-39 170h125l114 152-39 197h-80q5 49-27.5 85T690-160q-50 0-82-36t-27-85H380q5 49-27.5 85T270-160Zm364-270h215l6-33-80-107H666l-32 140Zm1-273 9-37-92 399 8-36 34-146 41-180ZM22-437l15-60h220l-15 60H22Zm80-146 15-60h260l-15 60H102Zm168 363q21 0 35.5-15t14.5-35q0-21-14.5-35.5T270-320q-20 0-35 14.5T220-270q0 20 15 35t35 15Zm420 0q21 0 35.5-15t14.5-35q0-21-14.5-35.5T690-320q-20 0-35 14.5T640-270q0 20 15 35t35 15Z"/></svg>
            <h5>Product to Buy - Welcome Guest</h5>
    </div>
        
        <div class="pages">

        </div>
        <p>Products from 3rd party signal</p>
<div class="pages2"></div>       
    </div>
    
</body>
</html>